$(function(){
	InitPage();
});

function dk(id){
    window.showModalDialog("noticeReadStatus.jsp?id="+id,"hkj","dialogWidth=350px;dialogHeight=330px");
}
function InitPage(){
    $('#t_notice').datagrid({
        idField:'id',
        title:'公告列表',
        url:'../privilegemgmt/ccNotice.action',	
        fit:true,
		height:550,
		width:700,
	//	fitColumns:true,
		striped:true,
		loadMsg:'loading...',
		rownumbers:true,
		collapsible:true,
        remoteSort:false,
        nowrap:false,
        pagination:true,
//      singleSelect:true,
//      remoteSort:false,
        rowStyler:function(index,record){
//        	if(record.sex==0){
//        		return "background:green";
//        	}
        },
        frozenColumns:[[      //冻结列特性，不要与fitColumns特性一起使用
            {
                field:'ck',
                width:50,
                checkbox:true
            }
         ]],
         columns:[[
                   {
		         	field:'id',
		        	title:'ID',
		        	width:50,
		        	align:'center'
		           },{
                	field:'name',
                	title:'标题',
                	width:450,
                	align:'center',
                	formatter:function(val,rec){
        		//	return '<a href="../privilegemgmt/ccNotice.action?method=getCcNotice&noticeId='+rec.id'">('+val+')</a>';
        			return '<a href="../privilegemgmt/ccNotice.action?method=getCcNotice&iceId='+rec.id+'" target="_blank" style="color:red;">'+rec.title+'</a>';
        			} 
                   },{
                	   field:'created',
                	   title:'发布时间',
                	   width:240,
                	   align:'center'
                   },{
                	   field:'MarkRead',
                	   title:'已读人',
                	   width:240,
                	   align:'center',
                	   formatter:function(val,rec){
                   		//	return '<a href="../jsp/noticeReadStatus.jsp?id='+rec.id+'" target="_blank" style="color:red;">阅读状态</a>';
                		//	return '<a onclick="window.showModalDialog("../jsp/noticeReadStatus.jsp?id='+rec.id+'","dialogWidth=200px;dialogHeight=100px");" target="_blank" style="color:red;">阅读状态</a>';
                		
                		   return '<a href="#" onclick="dk('+rec.id+')" style="color:red;">阅读状态</a>';
                	   }
                   }
         ]],
         pageSize:20,
         pageList:[5,10,15,20,50],
            toolbar :'#tb'
    });
}



function openLink(){
	window.open("../ccNotice.jsp");
}