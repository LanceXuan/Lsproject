$(function(){
	InitCC();
	InitBB();
	Initmorechose();
	

});

function InitCC(){
	$('#cc').combo({
//		required:true,
		editable:true,
		multiple:true
		});

		$('#sp').appendTo($('#cc').combo('panel'));
		
		$("#sp input").click(function(){
		var _value="";
		var _text="";
		$("[name=lang]:input:checked").each(function(){
		_value+=$(this).val()+",";
		_text+=$(this).next("span").text()+",";
		});
		//设置下拉选中值
		$('#cc').combo('setValue', _value).combo('setText', _text);
		});
		
//		$("#butsure").click(function(){
//		
//			var _value="";
//			var _text="";
//			$("[name=lang]:input:checked").each(function(){
//			_value+=$(this).val()+",";
//			_text+=$(this).next("span").text()+",";
//			});
//			//设置下拉选中值
//			$('#cc').combo('setValue', _value).combo('setText', _text).combo('hidePanel');
//		});
}

function getCCValue(){
	var value="";
	var text="";
	$("[name=lang]:input:checked").each(function(){
	value+=$(this).val()+",";
	text+=$(this).next("span").text()+",";
	});
	return value;
}



function InitBB(){
	$('#ee').combo({
		required:true,
		editable:true
//		multiple:true
		});

		$('#sq').appendTo($('#ee').combo('panel'));
		
		$("#sq input").click(function(){
		var _value="";
		var _text="";
		$("[name=langradio]:input:checked").each(function(){
		_value+=$(this).val();
		_text+=$(this).next("span").text();
		});
		//设置下拉选中值
		$('#ee').combo('setValue', _value).combo('setText', _text).combo('hidePanel');
		InitCG(_value);
		$("#divcg").show();
		});
	
	
}



function InitCG(idk){
	
    $('#cg').combogrid({  
        panelWidth: 400,  
        idField: 'id',        //ID字段    
        textField: 'nick',    //显示的字段    
        url: "../privilegemgmt/users.action?method=search&&departId="+idk,  
        fitColumns: true,  
        striped: true,  
        editable: true,  
        pagination: true,  //是否分页
        pageSize:20,
        pageList:[5,10,15,20,50],
        rownumbers: true,           //序号  
        collapsible: false,         //是否可折叠的  
        fit: true,                  //自动大小  
        method: 'post',  
        columns: [[  
                    { field: 'id', title: 'id', width: 80, hidden: true },  
                    { field: 'name', title: '登录名', width: 150 },  
                    { field: 'nick', title: '真实名', width: 150 }  
                ]],  
        onSelect: function () {              //选中处理  
            $('#txtGender').val($('#cg').combogrid('grid').datagrid('getSelected').Gender);  
        }  
    });  
}

function Initmorechose(){

	$.ajax({
		type : 'post',
		url : '../control/Vkorg.action',
		cache : false,
		dataType : 'json',
		data : {
			method : "getVkorgList",
		},
		success : function(data) {
			var ysValue = $('#liOptionms2side').html();
			var str = "<select name='liOption[]' id='liOption' multiple='multiple' size='10'>";
			//var data = r.rows;
			for (var i = 0; i < data.length; i++) {
				str += "<option value='" + data[i].vkorg + "'>"
						+ data[i].vkorg_name + "</option>";
			}
			str += "</select>";
			$("#sel").empty();
			$("#sel").html(str);
			$("#liOption").multiselect2side({
				selectedPosition : 'right',
				moveOptions : false,
				labelsx : '待选区',
				labeldx : '已选区'
			});
			$('#liOptionms2side').html(ysValue);
		},
		error : function(r) {
			alert("内部错误,请与信息管理中心联系,谢谢！");
		}
	});
}


